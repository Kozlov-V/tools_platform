<!DOCTYPE html>
	<html>
		<head>
			<title>UserEdit - Admin - JohnsonTools</title>
			<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
			<link type="text/css" rel="stylesheet" href="/css/admin/user_edit.css" />
			<script type="text/javascript" src="/js/lib/jquery.min.js"></script>
			<script type="text/javascript" src="/js/lib/jquery.validate.min.js"></script>
			<script type="text/javascript" src="/js/admin/user_edit.js"></script>
		</head>
		<body>
			<h3>Edit User</h3>
			<div id="content">
				<form id="editUserForm" action="/user/update_all" method="post">
					<div>
						<input type="hidden" id="id" name="id" 
							<erl>
								-include("jt.hrl").
								out(Arg) ->									
									Vals = yaws_api:parse_query(Arg),	
									Id = proplists:get_value("id", Vals),

									{html, io_lib:format("value=\"~s\"", [Id])}.
							</erl> />
						<label for="id_textbox" class="fieldTitle"> Id </label>
						<input class="textbox required" type="text" disabled="disabled" id="id_textbox" name="id_textbox"
							<erl>
								-include("jt.hrl").
								out(Arg) ->									
									Vals = yaws_api:parse_query(Arg),	
									Id = proplists:get_value("id", Vals),

									{html, io_lib:format("value=\"~s\"", [Id])}.
							</erl> />
					</div>
					<div>
						<label for="namae" class="fieldTitle"> Name </label>
						<input class="textbox required" type="text" id="name" name="name"
							<erl>
								-include("jt.hrl").
								out(Arg) ->								
									Vals = yaws_api:parse_query(Arg),	
									Id = proplists:get_value("id", Vals),

									User = model_user:get(Id),

									{html, io_lib:format("value=\"~s\"", [User#jt_user.name])}.
							</erl> />
					</div>
					<div>
						<label for="email" class="fieldTitle"> Email </label>
						<input class="textbox required email" type="text" id="email" name="email"
							<erl>
								-include("jt.hrl").
								out(Arg) ->	
									Vals = yaws_api:parse_query(Arg),	
									Id = proplists:get_value("id", Vals),

									User = model_user:get(Id),

									{html, io_lib:format("value=\"~s\"", [User#jt_user.email])}.
							</erl> />
					</div>
					<div>
						<label for="enabled" class="padding">
							<input type="checkbox" id="enabled" name="enabled" value="true"
								<erl>
									-include("jt.hrl").
									out(Arg) ->
										Vals = yaws_api:parse_query(Arg),
										Id = proplists:get_value("id", Vals),

										User = model_user:get(Id),

										Val = case User#jt_user.enabled of
											true -> "checked=\"checked\"";
											false -> ""
										end,

										{html, Val}.
								</erl> />
						 Enabled </label>							
					</div>
					<div>
						<label for="admin" class="padding">
							<input type="checkbox" id="admin" name="admin" value="true"
								<erl>
									-include("jt.hrl").
									out(Arg) ->
										Vals = yaws_api:parse_query(Arg),
										Id = proplists:get_value("id", Vals),

										User = model_user:get(Id),

										Val = case User#jt_user.admin of
											true -> "checked=\"checked\"";
											false -> ""
										end,

										{html, Val}.
								</erl> />
						 Admin </label>							
					</div>
					<div>
						<label for="note" class="padding">
							<input type="checkbox" id="note" name="note" value="true"
								<erl>
									-include("jt.hrl").
									out(Arg) ->
										Vals = yaws_api:parse_query(Arg),
										Id = proplists:get_value("id", Vals),

										Val = case model_user_preference:get(Id, ?USER_PREFERENCE_NOTE_ENABLED) of
											true -> "checked=\"checked\"";
											false -> ""
										end,

										{html, Val}.
								</erl> />
						 Note </label>							
					</div>
					<div>
						<label for="word" class="padding">
							<input type="checkbox" id="word" name="word" value="true"
								<erl>
									-include("jt.hrl").
									out(Arg) ->
										Vals = yaws_api:parse_query(Arg),
										Id = proplists:get_value("id", Vals),

										Val = case model_user_preference:get(Id, ?USER_PREFERENCE_WORD_ENABLED) of
											true -> "checked=\"checked\"";
											false -> ""
										end,

										{html, Val}.
								</erl> />
						 Word </label>							
					</div>
					<div>
						<label for="sport" class="padding">
							<input type="checkbox" id="sport" name="sport" value="true"
								<erl>
									-include("jt.hrl").
									out(Arg) ->
										Vals = yaws_api:parse_query(Arg),
										Id = proplists:get_value("id", Vals),

										Val = case model_user_preference:get(Id, ?USER_PREFERENCE_SPORT_ENABLED) of
											true -> "checked=\"checked\"";
											false -> ""
										end,

										{html, Val}.
								</erl> />
						 Sport </label>							
					</div>
					<div>
						<label for="gallery" class="padding">
							<input type="checkbox" id="gallery" name="gallery" value="true"
								<erl>
									-include("jt.hrl").
									out(Arg) ->
										Vals = yaws_api:parse_query(Arg),
										Id = proplists:get_value("id", Vals),

										Val = case model_user_preference:get(Id, ?USER_PREFERENCE_GALLERY_ENABLED) of
											true -> "checked=\"checked\"";
											false -> ""
										end,

										{html, Val}.
								</erl> />
						 Gallery </label>							
					</div>
					<div class="padding">
						<input id="submit" type="submit" value="Save" />
					</div>
					<div class="padding">
						<span class="msg">
							<erl>
								out(Arg) ->	
									QueryVals = yaws_api:parse_query(Arg),
									Msg = case proplists:get_value("msg", QueryVals) of
										undefined -> "";
										Val -> Val
									end,
									{html, Msg}.
							</erl>
						</span>
					</div>
				</form>
			</div>
		</body>
	</html>